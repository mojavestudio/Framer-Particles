<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particles Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        .test-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }
        .particles-container {
            width: 100%;
            height: 400px;
            border: 2px solid #333;
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
        }
        .controls {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .control-group {
            margin: 10px 0;
        }
        label {
            display: inline-block;
            width: 150px;
            margin-right: 10px;
        }
        input, select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #555;
            background: #222;
            color: white;
        }
        button {
            padding: 10px 20px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a9e;
        }
        .status {
            background: #444;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Particles Component Test</h1>
        <p>This is a test page for the Mojave Particles component. Use the controls below to test different settings.</p>
        
        <div class="controls">
            <h3>Controls</h3>
            <div class="control-group">
                <label for="splineMode">Spline Mode:</label>
                <input type="checkbox" id="splineMode" onchange="updateParticles()">
            </div>
            <div class="control-group">
                <label for="previewAnimation">Preview Animation:</label>
                <input type="checkbox" id="previewAnimation" onchange="updateParticles()">
            </div>
            <div class="control-group">
                <label for="testMode">Test Mode:</label>
                <input type="checkbox" id="testMode" onchange="updateParticles()">
            </div>
            <div class="control-group">
                <label for="amount">Amount:</label>
                <input type="range" id="amount" min="10" max="200" value="50" onchange="updateParticles()">
                <span id="amountValue">50</span>
            </div>
            <div class="control-group">
                <label for="speed">Speed:</label>
                <input type="range" id="speed" min="0.5" max="10" step="0.5" value="2" onchange="updateParticles()">
                <span id="speedValue">2</span>
            </div>
            <div class="control-group">
                <label for="backdrop">Background:</label>
                <input type="color" id="backdrop" value="#141414" onchange="updateParticles()">
            </div>
            <div class="control-group">
                <label for="color">Particle Color:</label>
                <input type="color" id="color" value="#ffffff" onchange="updateParticles()">
            </div>
        </div>
        
        <div class="status" id="status">
            Status: Loading...
        </div>
        
        <div class="particles-container" id="particlesContainer">
            <!-- Particles will be rendered here -->
        </div>
        
        <div class="controls">
            <h3>Instructions</h3>
            <ul>
                <li><strong>Spline Mode:</strong> Forces canvas rendering (useful for Spline compatibility)</li>
                <li><strong>Preview Animation:</strong> Toggles between static and animated particles in canvas mode</li>
                <li><strong>Test Mode:</strong> Shows particles in Framer canvas environment</li>
                <li><strong>Amount:</strong> Number of particles to display</li>
                <li><strong>Speed:</strong> Movement speed of particles</li>
            </ul>
        </div>
    </div>

    <script>
        // Simple test implementation
        let canvas, ctx, particles = [], animationId;
        
        function initCanvas() {
            const container = document.getElementById('particlesContainer');
            canvas = document.createElement('canvas');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            container.innerHTML = '';
            container.appendChild(canvas);
            ctx = canvas.getContext('2d');
        }
        
        function createParticles() {
            const amount = parseInt(document.getElementById('amount').value);
            const speed = parseFloat(document.getElementById('speed').value);
            
            particles = [];
            for (let i = 0; i < amount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * speed,
                    vy: (Math.random() - 0.5) * speed,
                    size: Math.random() * 3 + 1
                });
            }
        }
        
        function drawStatic() {
            const backdrop = document.getElementById('backdrop').value;
            const color = document.getElementById('color').value;
            
            ctx.fillStyle = backdrop;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
                ctx.strokeStyle = color;
                ctx.lineWidth = 1;
                ctx.stroke();
            });
        }
        
        function animate() {
            const backdrop = document.getElementById('backdrop').value;
            const color = document.getElementById('color').value;
            const previewAnimation = document.getElementById('previewAnimation').checked;
            
            if (!previewAnimation) {
                drawStatic();
                return;
            }
            
            ctx.fillStyle = backdrop;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                // Update position
                particle.x += particle.vx;
                particle.y += particle.vy;
                
                // Bounce off edges
                if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
                if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;
                
                // Keep particles within bounds
                particle.x = Math.max(0, Math.min(canvas.width, particle.x));
                particle.y = Math.max(0, Math.min(canvas.height, particle.y));
                
                // Draw particle
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
                ctx.strokeStyle = color;
                ctx.lineWidth = 1;
                ctx.stroke();
            });
            
            animationId = requestAnimationFrame(animate);
        }
        
        function updateParticles() {
            // Update display values
            document.getElementById('amountValue').textContent = document.getElementById('amount').value;
            document.getElementById('speedValue').textContent = document.getElementById('speed').value;
            
            // Cancel existing animation
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            // Initialize canvas
            initCanvas();
            createParticles();
            
            // Start appropriate mode
            const previewAnimation = document.getElementById('previewAnimation').checked;
            const splineMode = document.getElementById('splineMode').checked;
            
            if (splineMode || previewAnimation) {
                animate();
                document.getElementById('status').textContent = `Status: Running (${previewAnimation ? 'Animated' : 'Static'}) - ${particles.length} particles`;
            } else {
                drawStatic();
                document.getElementById('status').textContent = `Status: Static - ${particles.length} particles`;
            }
        }
        
        // Initialize on load
        window.addEventListener('load', () => {
            updateParticles();
        });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            if (canvas) {
                canvas.width = canvas.parentElement.offsetWidth;
                canvas.height = canvas.parentElement.offsetHeight;
                updateParticles();
            }
        });
    </script>
</body>
</html> 